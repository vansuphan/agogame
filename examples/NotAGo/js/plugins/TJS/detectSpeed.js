!function(){for(var e={},t=[{name:"OFFLINE",latency:Number.POSITIVE_INFINITY,throughput:0},{name:"DAIL_UP",latency:2e3,throughput:2.4},{name:"GPRS",latency:500,throughput:50},{name:"2G",latency:300,throughput:250},{name:"2G_EDGE",latency:300,throughput:450},{name:"3G",latency:200,throughput:750},{name:"3G_HSPA",latency:200,throughput:1e3},{name:"4G",latency:100,throughput:4e3},{name:"WIFI",latency:100,throughput:1e4}],n=0;n<t.length;n++)e["SPEED_"+t[n].name]=t[n];root=this,null!=root&&(previous_detectSpeed=root.detectSpeed),e.noConflict=function(){return root.detectSpeed=previous_detectSpeed,e},e.startSpeedCheck=function(e,n){e=(e=e||"http://ashanbh.github.io/images/coffee-apple-iphone-laptop.jpg")+(/\?/.test(e)?"&":"?")+"cacheBuster="+Date.now();var o={},r=function(e){o.firstByte=o.firstByte||Date.now(),console.log("P"),a.removeEventListener("progress",r,!1)},a=new XMLHttpRequest;a.addEventListener("progress",r,!1),a.onload=function(r){var a=r.target.response.length;o.url=e,o.dataSizeKB=a/1e3,o.end=Date.now(),o.latency=o.firstByte-o.start,o.throughput=Math.round(a/(o.end-o.firstByte)*100)/100;for(var u=0;u<t.length;u++)o.throughput>t[u].throughput&&(o.throughPutSpeedClass=t[u]),o.latency<t[u].latency&&(o.latencySpeedClass=t[u]);n&&n(o)},o.start=Date.now(),a.open("GET",e),a.send()},"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof define&&define.amd?define([],function(){return e}):root.detectSpeed=e}();