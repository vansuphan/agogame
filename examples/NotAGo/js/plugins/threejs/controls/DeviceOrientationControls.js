THREE.DeviceOrientationControls=function(e){var n=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var t,i,o,a,r=function(e){n.deviceOrientation=e},s=function(){n.screenOrientation=window.orientation||0},c=(t=new THREE.Vector3(0,0,1),i=new THREE.Euler,o=new THREE.Quaternion,a=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(e,n,r,s,c){i.set(r,n,-s,"YXZ"),e.setFromEuler(i),e.multiply(a),e.multiply(o.setFromAxisAngle(t,-c))});this.connect=function(){s(),window.addEventListener("orientationchange",s,!1),window.addEventListener("deviceorientation",r,!1),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",s,!1),window.removeEventListener("deviceorientation",r,!1),n.enabled=!1},this.update=function(){if(!1!==n.enabled){var e=n.deviceOrientation;if(e){var t=e.alpha?THREE.Math.degToRad(e.alpha)+n.alphaOffset:0,i=e.beta?THREE.Math.degToRad(e.beta):0,o=e.gamma?THREE.Math.degToRad(e.gamma):0,a=n.screenOrientation?THREE.Math.degToRad(n.screenOrientation):0;c(n.object.quaternion,t,i,o,a)}}},this.dispose=function(){n.disconnect()},this.connect()};