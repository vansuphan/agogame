function Board(o){var r=this;Konva.Group.call(r);var t=(o=void 0!==o?o:{}).hasOwnProperty("x")?o.x:0,e=o.hasOwnProperty("y")?o.y:0,n=15,a=15,c=new Konva.Group({x:t,y:e});function l(){!function(){for(var o=0;o<n;o++)for(var r=0;r<a;r++){var t=new Box({x:20*o,y:20*r,coord:[o,r],status:"off",colorBox:"none",onClick:s});c.add(t)}}()}function s(){r.fire("onClickBox")}r.init=l,l(),r.clearBoard=function(){console.log("BOARD CLEAR !!!!");for(const o of r.children[0].children)o.setAttrs({status:"off",colorBox:"none"}),o.children[0].setAttrs({status:"off",colorBox:"none"}),o.children[1].setAttrs({status:"off",colorBox:"none"}),o.children[1].children[0].setAttrs({status:"off",fill:COLOR_WHITE,colorBox:"none"}),o.children[1].hide(),o.children[2].hide(),o.children[1].draw(),o.children[2].draw()},r.autoPlay=function(r){!function(r,t=GameController.getColorTeam(1),e=GameController.getColorTeam(0)){arrBox=r.children[0].children;for(var n=arrBox.filter(o=>"on"===o.children[1].children[0].attrs.status).length,a=[],c=[],l=0;l<arrBox.length;l++)"off"===arrBox[l].children[0].attrs.status&&a.push(arrBox[l]),"on"===arrBox[l].children[1].children[0].attrs.status&&"on"===arrBox[l].children[0].attrs.status&&arrBox[l].children[0].attrs.colorBox===e&&arrBox[l].children[1].children[0].attrs.colorBox===e&&c.push(arrBox[l]);if(0===a.length||n===arrBox.length)return console.log(" End Game"),void o.endGame();var s=[...GameController.getBoxNoneNearBoxTeamOn(arrBox,COLOR_BLUE,COLOR_WHITE)];if(0===s.length){s=[...a];var i=Math.floor(Math.random()*s.length);h(s,i)}else{var i=Math.floor(Math.random()*s.length);h(s,i)}function h(o,r){o[r].setAttrs({status:"on",colorBox:t}),o[r].children[0].setAttrs({status:"on",colorBox:t}),o[r].children[1].setAttrs({status:"on",colorBox:t}),o[r].children[1].children[0].setAttrs({status:"on",colorBox:t}),o[r].children[1].show(),o[r].children[2].show(),o[r].children[1].draw(),o[r].children[2].draw(),GameController.animScale(o[r].children[1].children[0]),GameController.gameProcessing(o[r],arrBox)}}(r,GameController.getColorTeam(1))},r.lock=function(){console.log("lock")},r.unLock=function(){console.log("unLock")},r.add(c)}function Box(o){Konva.Group.call(this);var r=(o=o||{}).coord||-1,t=o.onClick||null;o.status,o.colorBox;this.onClickBox=t;var e=new Konva.Rect({coord:o.coord,x:o.x,y:o.y,fill:"#FFFFFF00",status:o.status,width:20,height:20,stroke:COLOR_MAIN,strokeWidth:.5,colorBox:o.colorBox}),n=new Konva.Rect({name:"boxTransparent",coord:o.coord,x:o.x,y:o.y,fill:"#FFFFFF00",width:20,height:20,stroke:"#FFFFFF00",strokeWidth:1}),a=new AGoDot({x:o.x,y:o.y,coord:o.coord,status:o.status,color:COLOR_WHITE,colorBox:o.colorBox});this.add(e,a,n),a.hide(),n.hide(),Object.defineProperties(this,{coord:{get:function(){return r}}})}function AGoDot(o){Konva.Group.call(this);var r=(o=o||{}).hasOwnProperty("color")?o.color:COLOR_WHITE,t=o.hasOwnProperty("x")?o.x+2:0,e=o.hasOwnProperty("y")?o.y+2:0,n=o.hasOwnProperty("status")?o.status:"off",a=new Konva.Rect({x:t,y:e,width:16,height:16,fill:r,shadowColor:"#000000",shadowBlur:2,shadowOffset:{x:-1,y:1},shadowOpacity:.15,cornerRadius:50,status:n,stroke:"#000000",strokeWidth:0});this.add(a),this.changeColor=function(o){a.fill(o)},this.checkAllow=function(o){}}function changeSceneById(o){Master.changeSceneById(o)}function getBoxAccepts(o){arrBox=o.children[0].children;for(var r=[],t=0;t<arrBox.length;t++)"#ffffff"===arrBox[t].children[1].children[0].attrs.fill&&"on"===arrBox[t].children[1].children[0].attrs.status&&r.push(arrBox[t]);for(let o=0;o<r.length;o++){GameController.getBoxAccept(r[0],arrBox);break}}function onChangeColor(o,r){for(var t=0;t<o.length;t++)o[t].children[0].setAttrs({status:"on",colorBox:r}),o[t].children[2].setAttrs({status:"on",colorBox:r}),o[t].children[1].setAttrs({status:"on",colorBox:r}),o[t].children[1].children[0].setAttrs({status:"on",colorBox:r}),o[t].children[1].changeColor(r),o[t].children[1].show()}function getBoxPositionXY(o,r,t){return o.filter(function(o){return o.coord[0]==t&&o.coord[1]==r})}Board.prototype=Object.assign(Object.create(Konva.Group.prototype),{}),Box.prototype=Object.assign(Object.create(Konva.Group.prototype),{}),AGoDot.prototype=Object.assign(Object.create(Konva.Group.prototype),{});