var namePlayer,infoPlayerFB;function PlayWithComputer(o){var e=[],n=GameController.getInfoPlayerFB(infoPlayerFB.id);e.push({id:0,Fb_id:n.id,name:n.name,image:n.image,score:n.score,winAmount:n.winAmount}),e.push({id:1,name:"Computer",image:"images/game/dot_white@3x.png",score:0,winAmount:0});var r=this;Konva.Layer.call(r);var t=(o=void 0!==o?o:{}).hasOwnProperty("statusResult")?o.statusResult:-1,a=e[0].score,l=e[1].score,i=new Logo;r.add(i);var c=new PopupTeam2({text:"YOUR TEAM BLUE",x:sw/2-150,y:188}),s=new Board({x:sw/2-150,y:188,endGame:I}),d=new InfoPlayerCard({scoreX:30,scoreY:9,heigth:26,width:26,score:a||0,image:e[0].image}),u=new InfoPlayerCard({scoreX:30,scoreY:9,heigth:26,width:26,score:l||0,image:e[1].image}),h=new Konva.Group({x:sw/2-50-100,y:136}),m=new Konva.Group({x:sw/2-50+100,y:136}),w=new Konva.Group({x:sw/2-89.5,y:498}),p=new Konva.Group({x:sw/2-27,y:124}),g=new TimeLine({type:"computer"}),f=new ButtonQuitGame({text:"QUIT GAME"});w.add(f),g.on(g.Events.ON_COMPLETE,function(){a<l&&(t=0,n.winAmount-=1,O(urlAPI+"setpoint"),console.log(n,"!!!"));a>l&&(t=1,n.winAmount+=1,O(urlAPI+"setpoint"),console.log(n,"WIN"));a==l&&(t=-1,console.log(n,"DRAW"));g.stop(),I(),v(),console.log("SHOW POPUP HET GIO")}),g.on(g.Events.ON_PLAY,function(){}),p.add(g),m.add(u),h.add(d);var y=new Copyright;function x(o){g.start(),o.autoPlay(o),g.restart()}function B(){!function(o){var e=o.children[0].children;for(let n=0;n<e.length;n++)e[n].children[0].on("click mousedown touchstart",function(){colorBox=GameController.getColorTeam(0),e[n].children[0].setAttrs({status:"on",colorBox:colorBox}),e[n].children[1].setAttrs({status:"on",colorBox:colorBox}),A(e[n].children[1]),e[n].children[1].children[0].setAttrs({status:"on",colorBox:colorBox}),e[n].children[0].draw(),e[n].children[1].draw(),e[n].children[2].show(),e[n].children[2].draw(),GameController.animScale(e[n].children[1].children[0]),e[n].children[1].children[0].draw(),GameController.gameProcessing(e[n],e[n].parent.children),g.start(),o.lock(),GameController.lockAllBox(o.children[0].children),setTimeout(function(){x(o),G(o),GameController.unlockBox(o.children[0].children)},750),G(o)})}(s)}r.add(h,m,p,s,w,y,c),$(GameController).on(GameController.Events.REPLAY,function(){r.children[8]&&1==r.children[8].getAttr("routeLayer")&&(s.clearBoard(),G(s))}),w.on("click mousedown touchstart",function(){Master.init(),changeSceneById(0)}),s.draw(),r.draw(),function(){Math.floor(2*Math.random());0,B()}(),r.awake=function(){var o;o=c,new Konva.Tween({duration:1.5,node:o,opacity:0,onFinish:function(){c.hide()}}).play()};var P=-1;function A(o){P=0,C(o)}function C(o){o.show(),o.changeColor(GameController.getColorTeam(P)),o.draw()}function v(){popupholder=new Popup({statusResult:t,routeLayer:1,urlImage:n.image}),r.add(popupholder)}function G(o){arrBox=o.children[0].children;for(var e=0,r=0,i=arrBox.filter(o=>"on"===o.children[1].children[0].attrs.status).length,c=0;c<arrBox.length;c++)arrBox[c].children[1].children[0].attrs.colorBox===COLOR_BLUE&&"on"===arrBox[c].children[1].children[0].attrs.status&&(r+=1),arrBox[c].children[1].children[0].attrs.colorBox===COLOR_WHITE&&"on"===arrBox[c].children[1].children[0].attrs.status&&(e+=1);l=e,a=r,u.children[1].children[1].setAttrs({text:l.toString()||0}),d.children[1].children[1].setAttrs({text:a.toString()||0}),d.children[2].draw(),u.children[2].draw(),i===arrBox.length&&(a>=l?(t=1,n.winAmount=n.winAmount+1,O(urlAPI+"setpoint")):(t=0,n.winAmount=n.winAmount-1,O(urlAPI+"setpoint")),g.stop(),I(),v())}function I(arguments){s.lock()}function O(o=urlAPI+"setpoint"){$.ajax({url:o,type:"POST",dataType:"json",data:n,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(o){console.log("Post completed !"),console.log(o)},error:function(o){console.log(o," ERROR ")}})}}$(GameController).on(GameController.Events.LOGIN,function(o){infoPlayerFB=o.playerInfo,namePlayer=o.playerInfo.name}),PlayWithComputer.prototype=Object.assign(Object.create(Konva.Layer.prototype),{});